var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};
function makeDraggableElement(b){function a(a){a=a||window.event;a.preventDefault();g=a.clientX;h=a.clientY;document.onmouseup=d;document.onmousemove=c}function c(a){a=a||window.event;a.preventDefault();e=g-a.clientX;f=h-a.clientY;g=a.clientX;h=a.clientY;b.style.top=b.offsetTop-f+"px";b.style.left=b.offsetLeft-e+"px"}function d(){document.onmouseup=null;document.onmousemove=null}var e=0,f=0,g=0,h=0;document.getElementById(b.id+"_draggable")?document.getElementById(b.id+"_draggable").onmousedown=a:
b.onmousedown=a}
function addBtn(b,a,c,d){c=void 0===c?"btn btn-primary btn-sm add_to_rm_button":c;d=void 0===d?"Loading...":d;var e=document.createElement("button");e.type="button";a&&(e.id=a);e.className=c;e.textContent=d;e.style.marginTop="10px";b.querySelector(".flex-item.alternate-sources-dropdown")||(e.style.marginLeft="10px");(a?b.querySelector("#"+a+".add_to_rm_button"):b.querySelector(".add_to_rm_button"))||(a=document.createElement("div"),a.className="bootstrap",a.appendChild(e),b.appendChild(a))}
function createTermsPanel(){if(null===document.getElementById("terms_panel")){var b=document.createElement("div");b.className="scholar_terms_panel bootstrap";b.id="terms_panel";var a=document.createElement("div");a.textContent="Terms from current research map";a.className="btn btn-lg btn-dark";a.id="terms_panel_draggable";var c=document.createElement("center"),d=document.createElement("div");d.id="open-btn";d.textContent="Show Terms";d.className="btn btn-primary";d.style.display="table-cell";c.appendChild(d);
a.appendChild(c);b.appendChild(a);a=document.createElement("div");a.id="termsBox";a.style.display="none";a.className="scholar_terms_box";c=document.createElement("div");c.id="researchTermsBox";a.appendChild(c);b.appendChild(a);document.body.appendChild(b);d.addEventListener("click",function(){"none"===$("#termsBox")[0].style.display?($("#termsBox")[0].style.display="block",$("#open-btn")[0].innerText="Close Terms"):($("#termsBox")[0].style.display="none",$("#open-btn")[0].innerText="Show Terms")});
makeDraggableElement(b)}}function addTermsTitle(b,a){var c=document.createElement("p");c.innerHTML="<center><h3>"+b+"</h3></center>";a.appendChild(c)}
function addTermToList(b,a,c){var d=document.createElement("li");d.innerHTML="<span>\n\t\t\t<a href='"+(baseLink+c+"+"+b)+"'>\n\t\t\t\t<img src='"+browser.extension.getURL("/icons/add.png")+"' alt='+' style='vertical-align: -25%'/>\n\t\t\t</a>\n\t\t\t&nbsp;\n\t\t\t<span class='term_text'>\n\t\t\t\t<a href='http://"+hostname+scholar.searchPath+b+"'>"+b+"</a>\n\t\t\t</span>\n\t\t</span>";d.className="term_list_item";a.appendChild(d)}
function addTermsGroup(b,a,c,d){var e=document.createElement("ul");e.className="terms_list";addTermsTitle(b,c);if(0==a.length)d=document.createElement("p"),d.innerHTML="<center><font size=2>There are no extracted terms for this group</font></center>",c.appendChild(d);else{b=$jscomp.makeIterator(a);for(a=b.next();!a.done;a=b.next())addTermToList(a.value,e,d);c.appendChild(e)}}
function createAddButtons(b){b||(b=document.querySelectorAll(scholar.articleBlocksSelector));for(var a={$jscomp$loop$prop$index$3:0};a.$jscomp$loop$prop$index$3<b.length;a={$jscomp$loop$prop$index$3:a.$jscomp$loop$prop$index$3},a.$jscomp$loop$prop$index$3++)browser.storage.local.get("anotherMaps").then(function(a){return function(c){c=c.anotherMaps;for(var d=0;d<c.length;d++){var f=c[d].split("/").slice(-1)[0];addBtn(b[a.$jscomp$loop$prop$index$3],f)}}}(a))}
function addButtonOnArticlePage(b){var a=document.querySelector(b);browser.storage.local.get("anotherMaps").then(function(b){b=b.anotherMaps;for(var c=0;c<b.length;c++){var e=b[c].split("/").slice(-1)[0];addBtn(a,e)}})}function removeAllNodes(b,a){var c=document.querySelector(b);if(c&&(c=c.querySelectorAll(a),c.length)){c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())d.value.style.display="none"}};
