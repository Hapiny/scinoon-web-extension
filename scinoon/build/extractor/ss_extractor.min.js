var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};var SSExtractor=function(a,b,c){return Extractor.call(this,a,b,void 0===c?!1:c)||this};$jscomp.inherits(SSExtractor,Extractor);
SSExtractor.prototype.extract=function(a){a=[];this.getBlocks();for(var b=$jscomp.makeIterator(this.blocks),c=b.next();!c.done;c=b.next()){c=c.value;var d={ids:[]},e={id:c.querySelector(".search-result-title").getElementsByTagName("a")[0].getAttribute("href").split("/").pop(),src:"semantic-scholar"};d.ids.push(e);d.authors=this.getAuthors(c,".author-list__link");d.textUrl=this.getTextLink(c,".icon-button.paper-link");d.textType=this.getTextType(c,".icon-button.paper-link");d.title=this.getTitle(c,
".search-result-title");d.year=this.getYear(c,'[data-selenium-selector="paper-year"]');d.abstractText=this.getAbstract(c,".abstract");d.bibtex=this.getBibtex(c,".formatted-citation.formatted-citation--style-bibtex",'[data-selenium-selector="cite-link"]',".close-modal-button");d.publicationSource=this.getPublicationSource(c,'[data-selenium-selector="venue-metadata"]');a.push(d)}return a};
SSExtractor.prototype.getAuthors=function(a,b,c){c=void 0===c?".more-authors-label":c;var d=[],e=a.querySelector(c);e&&e.click();b=Extractor.prototype.getAuthors.call(this,a,b);b=$jscomp.makeIterator(b);for(e=b.next();!e.done;e=b.next()){e=e.value;var f=e.getAttribute("href");e={fullName:e.innerText,ids:[{id:f.split("/").pop(),src:window.location.hostname+f}]};d.push(e)}(e=a.querySelector(c))&&e.click();this.verbose&&(console.log("EXTRACTOR ("+this.name+"):"),console.log(d));return d};
SSExtractor.prototype.getAbstract=function(a,b,c,d){d=void 0===d?7:d;(c=a.querySelector(void 0===c?".more.mod-clickable":c))&&c.click();a=Extractor.prototype.getAbstract.call(this,a,b).slice(0,-d);c&&c.click();return a};SSExtractor.prototype.getTextType=function(a,b){var c=Extractor.prototype.getTextType.call(this,a,b),d="";c&&"true"===c.getAttribute("data-heap-direct-pdf-link")&&(d="pdf");return d};
SSExtractor.prototype.getBibtex=function(a,b,c,d){if(c=a.querySelector(c))if(c.click(),c=document.querySelector(b)){a=c.innerText;if(d=document.querySelector(d))return d.click(),!a&&this.verbose?console.log("EXTRACTOR ("+this.name+"): bibtex isn't extracted"):this.bibtex&&console.log("EXTRACTOR ("+this.name+"): extracted bibtex = "+a.slice(0,20)+"..."),a;console.log("No close BTN!!!!!")}else console.log("No bibtex field!!!!!"),console.log(a),console.log(b);else console.log("No open BTN!!!!!")};
SSExtractor.prototype.getPublicationSource=function(a,b){var c=a.querySelector(b),d={name:""};!c&&this.verbose?console.log("EXTRACTOR ("+this.name+"): publication source isn't extracted"):this.verbose&&(d.name=c.innerText,console.log("EXTRACTOR ("+this.name+"): extracted publication source = "+d.name));return d};
SSExtractor.prototype.extractArticleFromPage=function(a){a=void 0===a?".fresh-paper-detail-page__header":a;var b={ids:[{id:window.location.href.split("/").slice(-1)[0],src:"semantic-scholar"}]};a=document.querySelector(a);this.blocks=[a];var c=a.querySelector('[data-selenium-selector="paper-doi"]');c&&(b.doi=c.innerText);b.title=this.getTitle(a,'[data-selenium-selector="paper-detail-title"]');b.abstractText=this.getAbstract(a,".text-truncator.abstract__text.text--preline",'[data-selenium-selector="text-truncator-toggle"]',
5);b.authors=this.getAuthors(a,".author-list__link.author-list__author-name");b.year=this.getYear(a,'[data-selenium-selector="paper-year"]');b.bibtex=this.getBibtex(a,".formatted-citation.formatted-citation--style-bibtex",'[data-selenium-selector="cite-link"]',".close-modal-button");b.incomingRefs=this.getArticleReferencesFromPage('[data-heap-nav="citing-papers"]',"CITATIONS",'[data-selenium-selector="cited-by"]',".citation__title > a");b.outgoingRefs=this.getArticleReferencesFromPage('[data-heap-nav="references"]',
"REFERENCES",'[data-selenium-selector="reference"]',".citation__title > a");b.similarArticlesRefs=this.getArticleReferencesFromPage('[data-heap-nav="similar-papers"]',"SIMILAR PAPERS",'[data-selenium-selector="related-papers-list"]','a[data-selenium-selector="title-link"]',!1);b.publicationSource=this.getPublicationSource(a,'[data-selenium-selector="venue-metadata"]');return[b]};
SSExtractor.prototype.getArticleReferencesFromPage=function(a,b,c,d,e){e=void 0===e?!0:e;var f=document.querySelector(a);a={};if(!f&&this.verbose)console.log("EXTRACTOR ("+this.name+"): refences aren't extracted");else if(this.verbose){console.log("EXTRACTOR ("+this.name+"): extracted refenreces");a.link=window.location.href+f.getAttribute("href");e&&(a.amount=parseInt(f.innerText.replace(b,"").match(/\d/g).join("")));a.ids=[];if(b=document.querySelector(c))if(d=b.querySelectorAll(d),d.length)for(e||
(a.amount=d.length),e=0;e<d.length;e++)b=d[e].getAttribute("href"),a.ids.push({id:b.split("/").slice(-1)[0],src:window.location.hostname+b});console.log(a)}return a};
